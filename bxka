local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- UI OluÅŸtur
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "TKM_UI"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Ana Frame
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 250, 0, 220)
Frame.Position = UDim2.new(0.5, -125, 0.5, -110)
Frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Visible = true
Frame.Parent = ScreenGui

-- KÃ¶ÅŸe yuvarlama
local UICorner = Instance.new("UICorner", Frame)
UICorner.CornerRadius = UDim.new(0, 12)

-- BaÅŸlÄ±k / Kapat Butonu
local TitleFrame = Instance.new("Frame")
TitleFrame.Size = UDim2.new(1, 0, 0, 30)
TitleFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
TitleFrame.BorderSizePixel = 0
TitleFrame.Parent = Frame

local UICornerTitle = Instance.new("UICorner", TitleFrame)
UICornerTitle.CornerRadius = UDim.new(0, 12)

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Text = "TaÅŸ KaÄŸÄ±t Makas"
TitleLabel.Size = UDim2.new(1, -30, 1, 0)
TitleLabel.Position = UDim2.new(0, 5, 0, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.Font = Enum.Font.SourceSansBold
TitleLabel.TextSize = 18
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Parent = TitleFrame

local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 25, 0, 25)
CloseBtn.Position = UDim2.new(1, -28, 0, 2)
CloseBtn.Text = "X"
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
CloseBtn.Font = Enum.Font.SourceSansBold
CloseBtn.TextSize = 18
CloseBtn.Parent = TitleFrame

CloseBtn.MouseButton1Click:Connect(function()
    Frame.Visible = false
end)

-- GÃ¶ster Butonu
local ShowBtn = Instance.new("TextButton")
ShowBtn.Size = UDim2.new(0, 100, 0, 30)
ShowBtn.Position = UDim2.new(0, 10, 0.9, 0)
ShowBtn.Text = "GÃ¶ster UI"
ShowBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
ShowBtn.Font = Enum.Font.SourceSansBold
ShowBtn.TextSize = 16
ShowBtn.Parent = ScreenGui

ShowBtn.MouseButton1Click:Connect(function()
    Frame.Visible = true
end)

-- TextBox (Hedef oyuncu adÄ±)
local TargetBox = Instance.new("TextBox")
TargetBox.Size = UDim2.new(0.9, 0, 0, 30)
TargetBox.Position = UDim2.new(0.05, 0, 0.15, 0)
TargetBox.PlaceholderText = "Oyuncu adÄ±"
TargetBox.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
TargetBox.TextColor3 = Color3.fromRGB(255, 255, 255)
TargetBox.ClearTextOnFocus = false
TargetBox.Parent = Frame
local TargetCorner = Instance.new("UICorner", TargetBox)
TargetCorner.CornerRadius = UDim.new(0, 8)

-- Toggle Buton
local ToggleBtn = Instance.new("TextButton")
ToggleBtn.Size = UDim2.new(0.9, 0, 0, 30)
ToggleBtn.Position = UDim2.new(0.05, 0, 0.35, 0)
ToggleBtn.Text = "Oto TKM: KapalÄ±"
ToggleBtn.BackgroundColor3 = Color3.fromRGB(200,0,0)
ToggleBtn.TextColor3 = Color3.fromRGB(255,255,255)
ToggleBtn.Font = Enum.Font.SourceSansBold
ToggleBtn.TextSize = 16
ToggleBtn.Parent = Frame
local ToggleCorner = Instance.new("UICorner", ToggleBtn)
ToggleCorner.CornerRadius = UDim.new(0, 8)

-- Manuel Butonlar
local function CreateBtn(txt, posX)
    local b = Instance.new("TextButton")
    b.Size = UDim2.new(0.28, 0, 0, 30)
    b.Position = UDim2.new(posX, 0, 0.65, 0)
    b.Text = txt
    b.BackgroundColor3 = Color3.fromRGB(80,80,80)
    b.TextColor3 = Color3.fromRGB(255,255,255)
    b.Font = Enum.Font.SourceSansBold
    b.TextSize = 16
    b.Parent = Frame
    local corner = Instance.new("UICorner", b)
    corner.CornerRadius = UDim.new(0, 8)
    return b
end

local TasBtn = CreateBtn("TaÅŸ", 0.05)
local KagitBtn = CreateBtn("KaÄŸÄ±t", 0.36)
local MakasBtn = CreateBtn("Makas", 0.67)

-- âœ… Chat'e mesaj yollama (TextChatService ile)
local function SendChat(msg)
    local textChatService = game:GetService("TextChatService")
    if textChatService and textChatService.TextChannels:FindFirstChild("RBXGeneral") then
        textChatService.TextChannels.RBXGeneral:SendAsync(msg)
    else
        warn("Chat kanalÄ± bulunamadÄ±!")
    end
end

-- Toggle sistemi
ToggleBtn.MouseButton1Click:Connect(function()
    AutoEnabled = not AutoEnabled
    if AutoEnabled then
        ToggleBtn.Text = "Oto TKM: AÃ§Ä±k"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(0,200,0)
    else
        ToggleBtn.Text = "Oto TKM: KapalÄ±"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(200,0,0)
    end
end)

-- Manuel buton click
TasBtn.MouseButton1Click:Connect(function()
    SendChat("TaÅŸ")
end)

KagitBtn.MouseButton1Click:Connect(function()
    SendChat("KaÄŸÄ±t")
end)

MakasBtn.MouseButton1Click:Connect(function()
    SendChat("Makas")
end)

-- Normalize (TÃ¼rkÃ§e karakterleri sadeleÅŸtir)
local function Normalize(str)
    str = string.lower(str)
    str = string.gsub(str, "ÄŸ", "g")
    str = string.gsub(str, "Ä±", "i")
    str = string.gsub(str, "ÅŸ", "s")
    str = string.gsub(str, "Ã§", "c")
    str = string.gsub(str, "Ã¶", "o")
    str = string.gsub(str, "Ã¼", "u")
    return str
end

-- ðŸ”„ Oto TKM sistemi
game:GetService("TextChatService").MessageReceived:Connect(function(msg)
    if not AutoEnabled then return end
    if not msg or not msg.Text or not msg.TextSource then return end

    local sender = msg.TextSource.Name
    local message = msg.Text

    if sender == TargetBox.Text and message then
        local m = Normalize(message)

        if string.find(m, "tas") then
            SendChat("KaÄŸÄ±t")
        elseif string.find(m, "kagit") then
            SendChat("Makas")
        elseif string.find(m, "makas") then
            SendChat("TaÅŸ")
        end
    end
end)
