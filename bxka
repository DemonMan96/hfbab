local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- UI OluÅŸtur
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "TKM_UI"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 250, 0, 200)
Frame.Position = UDim2.new(0.5, -125, 0.5, -100)
Frame.BackgroundColor3 = Color3.fromRGB(40,40,40)
Frame.Parent = ScreenGui

-- TextBox (Hedef oyuncu adÄ±)
local TargetBox = Instance.new("TextBox")
TargetBox.Size = UDim2.new(0.9, 0, 0, 30)
TargetBox.Position = UDim2.new(0.05, 0, 0.05, 0)
TargetBox.PlaceholderText = "Oyuncu adÄ±"
TargetBox.Text = ""
TargetBox.Parent = Frame

-- Toggle Button
local ToggleBtn = Instance.new("TextButton")
ToggleBtn.Size = UDim2.new(0.9, 0, 0, 30)
ToggleBtn.Position = UDim2.new(0.05, 0, 0.25, 0)
ToggleBtn.Text = "Oto TKM: KapalÄ±"
ToggleBtn.BackgroundColor3 = Color3.fromRGB(200,0,0)
ToggleBtn.Parent = Frame

local AutoEnabled = false

-- Manuel Butonlar
local function CreateBtn(txt, posX)
    local b = Instance.new("TextButton")
    b.Size = UDim2.new(0.28, 0, 0, 30)
    b.Position = UDim2.new(posX, 0, 0.7, 0)
    b.Text = txt
    b.BackgroundColor3 = Color3.fromRGB(80,80,80)
    b.Parent = Frame
    return b
end

local TasBtn = CreateBtn("TaÅŸ", 0.05)
local KagitBtn = CreateBtn("KaÄŸÄ±t", 0.36)
local MakasBtn = CreateBtn("Makas", 0.67)

-- âœ… Chat'e mesaj yollama (TextChatService ile)
local function SendChat(msg)
    local textChatService = game:GetService("TextChatService")
    if textChatService and textChatService.TextChannels:FindFirstChild("RBXGeneral") then
        textChatService.TextChannels.RBXGeneral:SendAsync(msg)
    else
        warn("Chat kanalÄ± bulunamadÄ±!")
    end
end

-- Toggle sistemi
ToggleBtn.MouseButton1Click:Connect(function()
    AutoEnabled = not AutoEnabled
    if AutoEnabled then
        ToggleBtn.Text = "Oto TKM: AÃ§Ä±k"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(0,200,0)
    else
        ToggleBtn.Text = "Oto TKM: KapalÄ±"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(200,0,0)
    end
end)

-- Manuel buton click
TasBtn.MouseButton1Click:Connect(function()
    SendChat("TaÅŸ")
end)

KagitBtn.MouseButton1Click:Connect(function()
    SendChat("KaÄŸÄ±t")
end)

MakasBtn.MouseButton1Click:Connect(function()
    SendChat("Makas")
end)

-- Normalize (TÃ¼rkÃ§e karakterleri sadeleÅŸtir)
local function Normalize(str)
    str = string.lower(str)
    str = string.gsub(str, "ÄŸ", "g")
    str = string.gsub(str, "Ä±", "i")
    str = string.gsub(str, "ÅŸ", "s")
    str = string.gsub(str, "Ã§", "c")
    str = string.gsub(str, "Ã¶", "o")
    str = string.gsub(str, "Ã¼", "u")
    return str
end

-- ðŸ”„ Oto TKM sistemi
game:GetService("TextChatService").MessageReceived:Connect(function(msg)
    if not AutoEnabled then return end
    if not msg or not msg.Text or not msg.TextSource then return end

    local sender = msg.TextSource.Name
    local message = msg.Text

    if sender == TargetBox.Text and message then
        local m = Normalize(message)

        if string.find(m, "tas") then
            SendChat("KaÄŸÄ±t")
        elseif string.find(m, "kagit") then
            SendChat("Makas")
        elseif string.find(m, "makas") then
            SendChat("TaÅŸ")
        end
    end
end)
